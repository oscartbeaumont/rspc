---
export interface Props {
  isLanding: boolean;
}

const isLanding = Astro.props.isLanding;
---

<button
  id="sidebar-toggle"
  type="button"
  aria-pressed="false"
  class={(isLanding ? "none" : "block") +
    " z-20 pr-4 md:hidden md:pl-4 md:pr-0 text-black dark:text-white"}
>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    class="h-10 w-10 stroke-current fill-transparent"
    viewBox="0 0 24 24"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="2"
      d="M4 6h16M4 12h16M4 18h16"></path>
  </svg>
  <span class="sr-only">Toggle sidebar</span>
</button>

<script>
  const body = document.querySelector("body");
  const toggleBtn =
    document.querySelector<HTMLButtonElement>("#sidebar-toggle");

  if (toggleBtn) {
    toggleBtn.addEventListener("click", () =>
      body?.classList.toggle("mobile-sidebar-toggle")
    );

    window.addEventListener("nav", function (e) {
      const url: URL = (e as any).detail;

      if (url.pathname === "/") {
        toggleBtn.style.display = "none";
      } else {
        toggleBtn.style.display = "block";
      }
    });
  } else {
    console.warn("sidebar-toggle button not found");
  }
</script>
